<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VendoRaiz - Listado Inicial</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <h1 id="main-title">Propiedades Exclusivas en Venta</h1>

    <div id="propiedades-container">
        <p>Cargando listado...</p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    
    <script>
    // 2. TUS CONFIGURACIONES DE PROYECTO (¡ESTO DEBE ESTAR YA CORRECTO!)
    const firebaseConfig = {
        // [TUS DATOS REALES DE CONFIGURACIÓN]
            apiKey: "AIzaSyAKXariRWtQooeoENvDLSEPJJGYE8eQ7nM",
            authDomain: "marketplace-inmobiliario-beta.firebaseapp.com",
            projectId: "marketplace-inmobiliario-beta",
            storageBucket: "marketplace-inmobiliario-beta.firebasestorage.app",
            messagingSenderId: "639523806499",
            appId: "1:639523806499:web:5b91af6866cba34ae28096",
            measurementId: "G-XVVLXJEYK0"
    };

    // 3. Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 4. Código para leer TODAS las propiedades
    db.collection("propiedades").get().then((querySnapshot) => {
        const contenedor = document.getElementById('propiedades-container');
        let htmlContent = ''; // Variable para construir todo el HTML
        
        if (querySnapshot.empty) {
            contenedor.innerHTML = "<h1>No se encontraron propiedades en la base de datos.</h1>";
            return;
        }

        querySnapshot.forEach((doc) => {
            const data = doc.data();
            // Creamos una "tarjeta" simple para cada propiedad
            htmlContent += `
        <div class="propiedad-card">
            <img src="${data.urlImagen}" alt="${data.titulo}">
            <div class="propiedad-details">
                <h2>${data.titulo}</h2>
                <p><strong>Ciudad:</strong> ${data.ciudad}</p>
                <p><strong>Precio:</strong> $${data.precio}</p>
            </div>
        </div>
    `;
        });
        
        contenedor.innerHTML = htmlContent; // Insertamos todas las tarjetas de golpe

    }).catch((error) => {
        console.error("Error al leer Firestore: ", error);
        document.getElementById('propiedad-info').innerHTML = "<h1>Error de conexión al obtener el listado.</h1>";
    });
</script>
</body>
</html>